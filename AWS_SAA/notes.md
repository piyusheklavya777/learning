- AWS Fundamental Building blocks
    - Regions and AZs : AZs are like data centers in a region which is a general area e.g. us-east-1 ap-southeast-1. AZs doesn't necessarily mean just 1 data centre. There might be multiple in the same locality.
    - Each region has 2 or more AZs.
    - Edge locations are 'networking points of presence' make sure content is delivered to user from the nearest availaible source. Consists of cloudfront, CDN (Content Delivery Network)
    - Shared Responsibility Model :
        - You're likely responsible for things you can do yourself like choosing db instance etc. Things you can't do like wiring in data center, aws is responsible for those
        - encryption is a shared responsibility : i'm supposed to click encrypt, while AWS is supposed to follow through and actually encrypt the data
    - some key services :
        - Compute
            - EC2
            - Lambda
            - Elastic beanstalk : it is a provisioning service. it auto handles all the creation of load balancers etc.
        -  Storage
            - S3
            - EBS : Elastic block storage : a virtual hask disk we attach to our virtual machines
            - EFS : Elastic File storage
            - FSx
        - Databases
            - RDS
            - DynamoDB (non relational)
            - Redshift (data warehousing)
        - Networking
            - way of all these parts to comm.
            - VPC
            - direct connect : is a way to connect your on-premises data centers to aws
            - Route 53 : DNS services
            - API Gateway
            - AWS Global Accelarator
    - Well architected framework
        - go through the white paper on aws well architected. TBD : night-before-exam
        - Five pillars of well architected framework:
            - Reliability
            - Operational Excellence
            - Performance Efficiency
            - Security
            - Cost Optimization
    - Quiz
        - what are 5 pillars of well architected
            - reliability, operational excellence, performance efficiency, security, cost optimization
        - which is not a storage solution from aws
            - ec2
        - which statement describes edge location
            - A networking point of presence used for caching content
        - which statement best describes edge location
            - a physical location on globe with atleast 2 AZs in it.
- IAM :
    - Identity and Access Management is the way to granting access to AWS resources
    - Root account is the email ID with which we signed up for AWS. It has full admin access
    - how to secure root account :
        - go to security credentials from user dropdown on top right.
        - activate MFA (multi factor authentication)
            - it can be set up with google authenticator or another one i forgot
            - creating administrator groups and then assign it to the few people
    - how to control user actions with policy documents
        - Policy documents are wriiten (read about the JSON format of it) and assigned to 
            - Groups
            - Users
            - Roles
        - good structure is to assign policy to a group and then assign admin users to the admin group
        - there's templates of policies in aws uder IAM
    - Users are physical people
    - Groups are like developers, administrators, support engg etc. Users are assigned to groups.
    - Roles are used internally by AWS parts to access other parts. Alambda may assume a specific role so it can get KMS keys for decrypting a message, when these keys are in different account.
    - When a user is created, by default it has no permissions, (no policies or groups attached to it)
    - To make your windows password same as AWS pssword, use IAM Federartion (uses SAML2.0). We have to establish it as a trusted password management service.
    - IAM is not region specific. It is global.
    - Set up password rotations
    - HANDS ON LAB:
    - Policy types:
        - managed policies are created by AWS or someone with access to do so from ur org
        - inline policies are used for on off situations. where we won't need such kind of policy for multiple groups/users.
    - The json structure of the policies. check iamPolicy.json
        - Version: The Version policy element specifies the language syntax rules that are to be used to process a policy. To use all of the available policy features, include the following Version element before the Statement element in all of your policies. IAM supports the following Version element values: 
            - 2012-10-17. This is the current version of the policy language.
            - 2008-10-17. This was an earlier version of the policy language. Newer features, such as policy variables, will not work with your policy. For example, variables such as ${aws:username} aren't recognized as variables and are instead treated as literal strings in the policy.
        - Statement: The Statement element is the main element for a policy. This element is required. The Statement element can contain a single statement or an array of individual statements. Each individual statement block must be enclosed in curly braces { }. For multiple statements, the array must be enclosed in square brackets [ ]. 
            - Effect: The Effect element is required and specifies whether the statement results in an allow or an explicit deny. Valid values for Effect are Allow and Deny. VVIMP: Any Deny statement will always override any and all Allow statements.
            - Action: You specify a value using a service namespace as an action prefix (iam, ec2, sqs, sns, s3, etc.) followed by the name of the action to allow or deny. The name must match an action that is supported by the service. The prefix and the action name are case insensitive.
            - Resource:
            - for more info https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html
    - Quiz:
        - T/F : True or False? An allow statement in a policy document will override a explicit deny statement.
            - False : This is rather the effect of explicit deny.
        - What does the "EAR" in a policy document stand for?
            - Effect, Action, Resource
        - True or False? MFA tokens are required for all new users.
            - Attaching MFA tokens for new users is not required, but it's a good idea.
        - Why is it dangerous to use the AWS root user account?
            - By default, the root account has every single permission.
- S3:
    - Object based storage.
    - each object can be 0 byte to 5TB
    - a bucket is a folder in the worldwide s3
    - s3 bucket name is unique worldwide
    - format of s3 url: https://bucket-name.s3.regionName.amazonaws.com/fileName e.g. https://test-bucket.s3.us-east-1.amazonaws.com/myphoto.jpg imp
    - if upload was succesful, s3 returns a HTTP 200 statusCode imp
    - It is a key value store. It can have these
        - key : name of file
        - value : actual file (s3 stores data as objects so we can upload any type of data music, files etc)
        - versionID : if versioning is enabled.
        - metadata : things like content-type, last-modified etc
    - availaibility: upto 99.99 percent availability from 99.95 depending on tier
    - durability: (can data be lost) built for 11 9s e.g. 99.999999999% durability (total 11, not 11 after decimal) imp.
    - data is stored across multiple devices redundant across atleast 3 AZs. imp.
    - Security :
     - encryption:
       - server-side encryption : as soon as data is uploaded, it's encrypted
     - Access Control Lists:
        - which aws accounts or groups have access. can be grained to indiv files.
    - strong read after write : no race around (read immediate after write)
    - storage classes(tier):
        - standard s3 (default version)
            - 99.99% avl and 11 9's durability
            - replicated in >= 3AZs
    - ACL is used to refine policies at indiv file level however bucket policies are used for rules that need to apply on whole bucket.
    - S3 is a global service, but buckets individually are hosted in a particular region
    - buckets are private by default. to make any file in a bucket public, the whole bucket has to be made public.making bucket public does not make all files public. 
    - hosting a static website on s3 :
        - things like basic .html website
        - s3 scales automatically
    - versioning in s3
        - can only be enabled, not disabled
        - useful to protect objects from being accidentally deleted.
        - enabling public access to objects will not apply to previous versions of the object
    - besides versioning, adding MFA will prevent accidental deletes as it will require MFA before delete
    - storage classes (6 total) avlblity n dur are not asked
        - s3 Standard (default)
            - 99.99 % avlbl
            - 11 9s durability
            - designed for frequent access
        - s3 Standard Infrequent access
            - lower per GB storage price
            - per GB retrieval fee
            - 99.9 % avlbl
            - 11 9s durability
            - e.g. backups
        - s3 Standard Infrequent access - Single zone
            - 20 % lower per GB storage price than s3 s-ia
            - per GB retrieval fee
            - 99.5 % avlbl
            - 11 9s durability
            - non-critical stuff
        - s3 glacier
            - long term data archiving
            - 1 min to 12 hour retrieval
        - s3 deep archive
            - rarely accessed data
            - default 12 hour retrieval time
            - 11 9s durability
        - s3 intelligent tiering
            - moves across tiers acc. your access behaviour
    - cost wise ranking : s3 > s3 it > s3ia > s3ia-oz > s3-g > s3g-da
    - lifecycle management
        - automating moving data between tiers
        - lifecycle rules can only move objects in fwd direction, not back e.g. glacier to standard is not possible
    - s3 object lock:
        - WORM : write once read many
        - Compliance mode: the version can't be deleted or modified by anyone 
        - Governance mode:the version can be deleted or modified by select few
    - glacier vault lock:
        - way to apply WORM lock to glacier
    - encryption :
        - encryption in trsansit : https : the s in the end means that the content is encrypted.
        - encryption at rest : 
            - SSE: server side encryption
                - SSE-S3 : encryption is done by s3. AES 256 bit. most common type. keys maintained by aws
                - SSE-KMS : keys maintained by user but generated by aws kms
                - SSE-C : Customer provided keys
            - client side encryption : user encrypts data at the client side. aws has no role in encryption here
        - if the file has to be encrypted at upload time, set header :: x-amz-server-side-encryption : the value can be 'AES256' or 'aws:kms'
        - enforce encryption:
            - force encryption using a bucket policy (imp) : we can tell from policy that deny any PUT request that doesnt have the above header
    - performance :
        - use prefix like folder1/subfolder2/file because of below
        - 3500 PUT / COPY / POST / DELETE requests
        - 5500 GET requests
        - both these per prefix per second (so go for more and more prefixing i.e. more folders)
        - using kms for encryption has limits
            - every upload / download calls kms api. so kns limits also have to be considered.
        - s3 multipart upload: (uploading chunks parallely) : recommended for file size over 100mb, required above 5gb
        - s3 byte range fetches:  download a specified byte range. limits spread of errors. lowers time because of parallel download.
    - s3 replication :
        - replicate objects from one bucket to another. version needed in both src and dest
        - delete markers are not replicated by default. can enable that though. this means deleting in source will not auto delete in dest bucket, not by default.
        - 



- EC2:
    - pricing options
        - on demand : pay by hour or second
            - use case : no upfront payment, no long term commitment e.g. starting a new project.
        - reserved : reserve for 1 or 3 years (cost reduction upto 72%)
            - use case : when we know exactly what kind of capacity, how many servers etc is needed. so u don't need scaling much. use is fixed.
            - specified on regional level
            - types:
                - standard RI
                - convertible reserved instaces : has option to upgrade ur servers
                - scheduled RI : scheduled to start and end in a recurring but fixed timeframe
        - spot : bid for unused space, pricing changes dynamically
            - specify at which price you want to have instance. when price moves up, instance is taken away
        - dedicated host : a physical machine dedicated to you. costliest
            - compliance etc, license does not support cloud deployment alongside other appln. etc
            - can be purchased per hour
            - calculator.aws
    - subnets are AZs
    - steps in launching EC2 :
        - select AMI  e.g. BigSur
        - select instance size e.g. t2.micro
        - specify config like how many instances, which subnet etc
        - select storage volume(virtual storage) e.g. 8gb EBS
        - add tags and specify/create security group(which in and out traffic to allow) and specify protocols over which to comminucate e.g. SSH, HTTP, HTTPS, CIDR block on IPv4/6
    - once you get the pem file, change it to an executable: chmod 400 mypemfile.pem
    

    
         